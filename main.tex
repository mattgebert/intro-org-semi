\documentclass{report} %Report=Chapters, Article=Sections

%------------------------------------------------------
%--------------------INTRODUCTION----------------------
%------------------------------------------------------
% Welcome to my thesis template (https://github.com/mattgebert/thesis-template).
% (!) This template requires xelatex.
% Here you'll find all the necessary tools for constructing your thesis, including:
% - Subfile structures and bibfiles.
% - AdademicIcon tags 
% - Useful comments for why packages have been included.
% Please feel free to add any feedback as issues on Github.

%-----------------------PACKAGES-----------------------
\usepackage{geometry} %Allows changes of margins to document.
\usepackage{amsmath} %Allows text in equations
\usepackage{float} %Allows Placement of Images & Tables within pages, not at top etc. ie {table}[H]
\usepackage[dvipsnames]{xcolor} %Allows custom names and colour designs
\usepackage[final]{pdfpages} %to insert pdf pages of code.
\usepackage[xetex]{hyperref} %Hyperlinking \href{URL}{text} %xetex needed for academicons, see below.
\usepackage[nameinlink]{cleveref} %Allows text like "Figure" to be automatically generated. "\cref{}" == "Tbl. \ref{}". [nameinlink] allows to include "Figure 1" as part of the hyperref, not just "1".
\usepackage{matlab-prettifier} %Matlab Code Inserts
%\usepackage{braket} %Dirac Notations
\usepackage{rotating} %Allows rotation of an image 
\usepackage{tabularx} %Allows tables that have multiple lines per cell, or tables columns with fixed withds.. https://tex.stackexchange.com/questions/194737/multiline-in-a-table-cell 
\usepackage{array} %used to allow centering in fixed width tabular column. https://stackoverflow.com/a/1358166/1717003
\usepackage{dsfont} %Allows symbols like \mathds{1} for identity matrix. 
\usepackage[justification=centering]{caption} %Allows use of subfigure environment with captions inside figure. Justification centering means multiline captions will be centred
\usepackage{subcaption} %The same as above. https://tex.stackexchange.com/questions/37581, % https://tex.stackexchange.com/questions/119984/ % https://tex.stackexchange.com/questions/286737/ --> use tabular within figure.
\usepackage{listings} %Used for including code within latex.
\usepackage{amssymb} %Allows \therefore.
\usepackage{wrapfig} %Allows wrapping of text around figures. \begin{wrapfigure}[lineheight]{position}{width}
\usepackage{enumitem} %Allows change of horizontal seperation distances \begin{itemize}[noitemsep,topsep=0pt]
\usepackage{graphicx} %Enables use of \DeclareGraphicsExtensions command and setting graphics path.
\usepackage[toc,page]{appendix}%Allows the use of chapters within a \begin{appendices} environment.
\usepackage{multirow} %Allows the placement of multirow images in the figure environment. https://tex.stackexchange.com/a/394954/137109
\usepackage{longtable} %Allows the display of large tables over multiple pages. Used in appendix. https://www.tablesgenerator.com/latex_tables#
\usepackage[english]{babel} %Required to stop '_' causing issues in file references, though it's normally used for languages.
\usepackage{outlines} %useful package to be able to do subitem enumerates and lists. use \begin{outline} with option [enumerate] instead of itemize with \1 \2 \3 as sub indexes.
\usepackage{braket} %allows use of \bra and \ket for QM.
\usepackage{esint} %allows use of \oint \oiint and other such integrals. Use \limits_{Expression} to place underneath integrals.
\usepackage{csquotes} %Allows quotations, such as \enquote, \blockcquote or \begin{dispalycquote}
\usepackage{epigraph} %Allows feature quotations which look niceish. \epigraph{Quote}{Author}
\usepackage{bm} %Allows bold maths letters such as \bm{\sigma}
\usepackage{multicol} %Allows use of multiple columns in the middle of a page, without pagebreaking.
\usepackage{paracol} %allows use of multiple columns in the middle of a page, of unequal lengths. Uses \switchcol to change para. Note paracol needs global counters activated, it generally only increments tables and figures locally. See https://tex.stackexchange.com/a/304466/137109. Also use \columnratio{X} to set relative widths of columns.
\usepackage{blkarray} %Allows for rol/col names on matrixes.  https://tex.stackexchange.com/questions/59517/label-rows-of-a-matrix-by-characters
\usepackage{mathtools} %Allows \xleftrightarrow{} to generate corresponding equations.
\usepackage{xpatch} %Allows modification of macro commands with modifiers, including biblatex commands..
\usepackage{xfrac} %Allows use of \sfrac to do textmode fractions diagonal.
\usepackage{nth} % Allow use of \nth{1} to translate to 1^{st} etc.
\usepackage{environ} %https://tex.stackexchange.com/questions/99612 --> Using new environment for Tabularx cases.. The purpose for this is to create a RevTex4.X table similar to ruledtabular
\usepackage{titlesec} %allows use of changing chapter and title fomatting. https://tex.stackexchange.com/questions/309097/chapter-heading-placement https://tex.stackexchange.com/a/60212/137109
\usepackage{etoolbox} %allows use of changing chapter and title fomatting.  https://tex.stackexchange.com/questions/161362/how-to-re-position-each-chapter-at-the-beginning-of-the-page
\usepackage{siunitx} %used to write micrometers and other units properly. \SI{1.55}{\micro\metre}https://tex.stackexchange.com/a/549/137109 
%\sisetup{math-micro=\text{µ},text-micro=µ} %https://tex.stackexchange.com/a/54915/137109 SIUnitx compatibility issue for xelatex
%\sisetup{math-micro = \mu} %https://tex.stackexchange.com/a/513521/137109 SIUnitx compatibility issue for xelatex
\usepackage{academicons} %https://tex.stackexchange.com/a/519416/137109
\usepackage{adjustbox} %required for centring tables that are too long. https://tex.stackexchange.com/q/39435/137109
\usepackage{makecell} % Allows use of multiline cells with ease in tables. Commands \renewcommand{\cellalign}{vh}, \renewcommand{\theadalign}{vh}, can be used to change positioning from default cc. [tcbh,lcr] are the options. https://tex.stackexchange.com/a/176780/137109 
\usepackage{calligra} % Font packages for using cursive for Acknkowledgement. https://tex.stackexchange.com/q/48002/137109
\usepackage{fancyhdr} % Generate fancy headers - see below.
\usepackage{svg} % allow inclusion of svg items. Note requires use of Inkscape. https://tex.stackexchange.com/a/74693/137109

\usepackage[toc,section=chapter]{glossaries} %Allows the use of a glossary.

% Packages for Latex Table Generator
%\usepackage[normalem]{ulem}
%\useunder{\uline}{\ul}{}

% Use latex because it's actively developed instead of bibtex or natbib.
\usepackage[nottoc,numbib]{tocbibind} %Adds bibliography to TOC.
\usepackage[
    style=authoryear,
    autocite=superscript,
    style=phys %https://www.overleaf.com/learn/latex/Biblatex_citation_styles
]{biblatex} % required for subfile bib using this answe: https://tex.stackexchange.com/a/578992/137109

%Change the bibliography name to references:
% \renewcommand\bibname{References}

\usepackage{subfiles} %Allows a TEX document to be contained within multiple TEX Files.

%--------------------CUSTOM COMMANDS-----------------------
%Stylized quote command for features in text. 
\newcommand{\customquote}[3]{\begin{quotation} \textit{#1} \end{quotation} \begin{flushright} - #2, \textit{#3}\end{flushright} }

%Mimmic Mathematica Behaviour.
\newcommand{\pd}{\partial}

%Code to make a glossary entry:
\newcommand{\gloss}[2]{\paragraph{}\textbf{#1}	\textit{#2}}
%Code to change colour to blue of a cite.
\newcommand{\cc}{\hypersetup{citecolor=blue}}
%Code to add single equation lines to align*'s
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}
%Defines a typeset for generating 'code' text.
\definecolor{lightgrey}{RGB}{200,200,200}
\newcommand{\code}[1]{\colorbox{lightgray}{\lstinline[basicstyle=\ttfamily\color{black}]|#1|}}
%Code to add \textit{et al} text.
\newcommand{\etal}[1]{\textit{et al.}#1}
%Tensor product symbol
\newcommand{\tens}{\mathbin{\mathop{\otimes}}} 
%Trace text in equations:
\newcommand{\tr}[1]{\text{Tr}\left[#1\right]}
%Greater and Less than Similar commands simplified:
\newcommand{\gsim}{\gtrsim}
\newcommand{\lsim}{\lesssim}

%command for doing degrees celcius.
\newcommand{\degrees}[0]{$^{\circ}$C}

%---------------------- EDIT STYLING COMMANDS ---------------------------
%% Uncomment these commands if you want to demonstrate edits with green and red styling:
% a) Style \hladd{text} green.
\newcommand{\hladd}[1]{ 
	\begingroup
	\color{ForestGreen}#1
	\endgroup
}
% b) Style \hlrem{text} red/italic.
\newcommand{\hlrem}[1]{
	\begingroup
	\color{red}
	\textit{#1}
	\endgroup
}

%% Uncomment these commands if you want to hide removals and only show edits:
% a) Show \hladd{text} elements.
%\newcommand{\hladd}[1]{
%	\begingroup
%	#1
%	\endgroup
%}
% b) Hide \hlrem{text} elements.
%\newcommand{\hlrem}[1]{
%	\begingroup
%	\endgroup
%}

% --------------------- DEFINE MATERIALS OR UNITS ---------------------------------------
%Materials
\newcommand{\silicondioxide}[0]{SiO\textsubscript{2}}
\newcommand{\GGG}[1]{Gd\textsubscript{3}Ga\textsubscript{5}O\textsubscript{12}#1}
%Units
\newcommand{\mobilityunits}{cm\textsuperscript{2}V\textsuperscript{-1}s\textsuperscript{-1}}
\newcommand{\spinconductivityunits}{$\hbar/2e$ $\Omega^{-1}$m$^{-1}$}

% ------------------------------------ Generate Individual ID references ------------------------------------
\newcommand{\orcid}[1]{\href{#1}{\aiOrcid}}
% \newcommand{\semontib}[0]{Semonti Bhattacharrya\textsuperscript{\orcid{https://orcid.org/0000-0003-3387-0531}}}
% \newcommand{\michaelf}[0]{Michael S. Fuhrer\textsuperscript{\orcid{https://orcid.org/0000-0001-6183-2773}}}
% \newcommand{\gracec}[0]{Grace L. Causer\textsuperscript{\orcid{https://orcid.org/0000-0002-8246-038X}}}
% \newcommand{\dennisl}[0]{Dennis Y.C. Leung\textsuperscript{\orcid{https://orcid.org/0000-0002-8917-0916}}}
% \newcommand{\davidc}[0]{David Cortie\textsuperscript{\orcid{https://orcid.org/0000-0003-2383-1619}}}
% \newcommand{\markedmonds}[0]{Mark T. Edmonds\textsuperscript{\orcid{https://orcid.org/0000-0001-8054-5470}}}
% \newcommand{\yihsunc}[0]{Yi-Hsun Chen\textsuperscript{\orcid{https://orcid.org/0000-0001-6313-5189}}}
% \newcommand{\kaijianx}[0]{Kaijian Xing\textsuperscript{\orcid{https://orcid.org/0000-0001-5254-4710}}}

% ---------------------------------- Additional common mathematical expressions -----------------------------------
%Spinors
\newcommand{\spinor}[2]{\begin{Bmatrix}#1\\#2\end{Bmatrix}}
\newcommand{\spinort}[2]{\begin{Bmatrix}#1&#2\end{Bmatrix}}
%Pauli matricies
\newcommand{\paulia}[0]{\begin{bmatrix}0&1\\1&0\end{bmatrix}}
\newcommand{\paulib}[0]{\begin{bmatrix}0&-i\\i&0\end{bmatrix}}
\newcommand{\paulic}[0]{\begin{bmatrix}1&0\\0&-1\end{bmatrix}}




%New environment for multi-col, for figures. https://tex.stackexchange.com/questions/12262/multicol-and-figures
\newenvironment{Figure}
{\par\medskip\noindent\minipage{\linewidth}}
{\endminipage\par\medskip}

% Appendix Package (see https://tex.stackexchange.com/a/49647/137109 comments)
\renewcommand{\appendixname}{Appendix} 
\renewcommand{\appendixtocname}{Appendix}
% \renewcommand{\appendixpagename}{Appendix}

% https://tex.stackexchange.com/a/120723/137109

\AtBeginEnvironment{subappendices}{%
\crefalias{section}{appendix} %https://tex.stackexchange.com/questions/119513/cleveref-and-appendix-packages-appendix-referenced-as-section
\chapter*{Appendix}
\addcontentsline{toc}{chapter}{Appendices}
\counterwithin{figure}{section}
\counterwithin{table}{section}
}


%CUSTOM to have 5 depths.
% Setup depth of sections in Latex. Copied from https://tex.stackexchange.com/a/60212/137109
\titleclass{\subsubsubsection}{straight}[\subsection]
\titleclass{\subsubsubsubsection}{straight}[\subsection]
\newcounter{subsubsubsection}[subsubsection]
\newcounter{subsubsubsubsection}[subsubsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\thesubsubsubsubsection{\thesubsubsubsection.\alph{subsubsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsubsection.\roman{paragraph}} % optional; useful 
\titleformat{\subsubsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsection}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titleformat{\subsubsubsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsubsection}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\makeatletter
% \renewcommand\paragraph{\@startsection{paragraph}{6}{\z@}%
%   {3.25ex \@plus1ex \@minus.2ex}%
%   {-1em}%
%   {\normalfont\normalsize\bfseries}}
% \renewcommand\subparagraph{\@startsection{subparagraph}{7}{\parindent}%
%   {3.25ex \@plus1ex \@minus .2ex}%
%   {-1em}%
%   {\normalfont\normalsize\bfseries}}
\def\toclevel@subsubsubsection{4}
\def\toclevel@subsubsubsubsection{5}
\def\toclevel@paragraph{6}
\def\toclevel@paragraph{7}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
\def\l@subsubsubsubsection{\@dottedtocline{5}{10em}{5em}}
\def\l@paragraph{\@dottedtocline{6}{13em}{6em}}
\def\l@subparagraph{\@dottedtocline{7}{16em}{7em}}
\makeatother
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}



%-----------------------DOCUMENT SETUP-----------------------

%Custom command for ruledtabular (RevTex4) but without RevTex. https://tex.stackexchange.com/questions/99612
\NewEnviron{ruledtabular}{
\begin{tabularx}{\textwidth}{X}%
    \hline\hline%
    \BODY
    \hline\hline%
\end{tabularx}
}
\newcommand{\ruleddoubleline}[0]{%
    \hline\hline
}

% Subfile bibliographies, using biblatex. See: https://tex.stackexchange.com/a/578992/137109
%\addglobalbib{MyLibrary}
%\renewcommand{\topdir}{.}

%% Works for bib compilation in TexStudio
\providecommand{\topdir}{.}
\providecommand{\topdirsubfiles}{..}
%\addglobalbib{\topdir/MyLibrary.bib} % topdir is needed here so that
\addglobalbib{\ifSubfilesClassLoaded{\topdirsubfiles}{\topdir}/org-semicon.bib} % topdir is needed here so that
                                      % we can resolve the path in the subfile
                                      % correctly. There we re-define the
                                      % topdir macro to the location of the
                                      % bib file. Used for biber... not biblatex

% Added command for TexStudio to interpret autocomplete, but does not get used at compilation.
\ifnum 0=0 {} \else{\addglobalbib{./org-semicon.bib}} \fi

\DeclareCiteCommand{\fullcite}
  {\usebibmacro{prenote}}
  {%
   \clearfield{url}%
   \clearfield{title}%
   \clearlist{language}%
   % \clearfield{author}
   % \clearfield{pages}%
   \clearfield{pagetotal}%
   % \clearfield{edition}%
   \clearfield{labelyear}%
   \clearfield{note}%
   \clearname{author}%
   % \clearname{introduction}%
   \usedriver%
     {}%
     {\thefield{entrytype}}%
  }%
  {\multicitedelim}
  {\usebibmacro{postnote}}

%Allows display breaks in equations across pages. More condensed.
%\allowdisplaybreaks

%Allows custom setup of URL link colours:
\hypersetup{
	%	pdfborder={0 0 1}
	linkcolor={red!50!black},
	citecolor={blue!50!black},
	urlcolor={blue!80!black},
	colorlinks = true,
	%	hidelinks=true
}
\AtBeginDocument{\hypersetup{ 
		pdfborder={10 10 0.1 [1 0]}, %Required to go within "\AtBeginDocument" here otherwise overrided. {HorizontalCornerRadius VerticleCordnerRadius Thickness [Dashes PerUnits] }
		citebordercolor={0 0 1}, %{R G B} on a scale 0 to 1.
		linkbordercolor={0 0.9 0}, %{R G B} on a scale 0 to 1.	
}}
%Setup Epigraph quoting:
\setlength\epigraphwidth{.8\textwidth}
\setlength\epigraphrule{0pt}



% https://tex.stackexchange.com/questions/171587/append-entries-to-an-existing-graphicspath
% TODO: later move this into each chapter...
\ExplSyntaxOn
\NewDocumentCommand{\appendtographicspath}{m}
 {
  \tl_gput_right:cn {Ginput@path} { #1 }
 }
\NewDocumentCommand{\prependtographicspath}{m}
 {
  \tl_gput_left:cn {Ginput@path} { #1 }
 }
\ExplSyntaxOff

%paracol commands.
\globalcounter{figure}
% \globalcounter{table}
% \columnratio{0.6}

% Modifty cleveref footnotes to allow superscript footnoting. 
% https://tex.stackexchange.com/a/10116/137109
\crefformat{footnote}{#2\textsuperscript{\footnotemark[#1]}#3}
% Also allow blank footnotes, so we can reference within a table.  https://tex.stackexchange.com/a/30723/137109, 
%Custom solution for markless footnote
\newcommand\marklessfootnote[1]{
    \addtocounter{Hfootnote}{1} 
    \addtocounter{footnote}{1}
    \footnotetext{#1}
}
\makeatletter
\def\blfootnote{\xdef\@thefnmark{}\@footnotetext}
\makeatother

% -------------------HEADERS AND FOOTERS---------------------
% Solution for headers and footers for each page: https://tex.stackexchange.com/a/89928/137109
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}

% Move the chapter header further down the page.
% https://tex.stackexchange.com/questions/161362/how-to-re-position-each-chapter-at-the-beginning-of-the-page
\makeatletter
\patchcmd{\@makechapterhead}{\vspace*{50\p@}}{}{}{}
\patchcmd{\@makeschapterhead}{\vspace*{50\p@}}{}{}{}
\@addtoreset{chapter}{part} %To get 'appendicies` environment compiling at end of document. https://tex.stackexchange.com/a/129130/137109
\@addtoreset{@ppsaveapp}{part}
\makeatother

% Automate the footer generation, using package fancyhdr.
\pagestyle{fancy}
\fancyhf{} % clear the headers
\fancyhead[L]{%
	% We want italics
	\itshape
	% The chapter number only if it's greater than 0
	\ifnum\value{chapter}>0 \chaptername\ \thechapter. \fi
	% The chapter title
	\leftmark}
\fancyhead[R]{Matt Gebert, \date{\today}}
\fancyfoot[C]{\thepage}
\fancypagestyle{plain}{
	\renewcommand{\headrulewidth}{0pt}
	\fancyhf{}
	\fancyfoot[C]{\thepage}
	%	\fancyhead[r]{Matt Gebert}
}
% --------------------- Graphics Options -----------------------
\DeclareGraphicsExtensions{.pdf,.png,.jpg,.svg}

% Can also define graphics paths for folders, but I prefer to use full relative filename path.
%\graphicspath{
	%    {./resources/ch1},
	%    {./resources/ch4},
	%    {./resources/ch4/subfolder},
	%}


% --------------------- Document ----------------------------
\makeglossaries
\makeatletter %Treats the @ symbol differently for TeX
\font\myTitle=cmr12 at 29pt
\title{\myTitle Introduction to the microstructure of organic semiconductors} \let\Title\@title
\date{\today} \let\Date\@date
\author{Matthew Gordon Gebert} \let\Author\@author
\makeatother %Returns to default @ symbol usage.

\begin{document}
	\newgeometry{left=3cm, bottom=3cm}
    % \hspace{-0.5cm}\includegraphics[width=\linewidth]{resources/ch0/monash-logo-1.png}
	{\let\newpage\relax\maketitle}
	\begingroup
	\centering
    \vspace{-2.5cm}
	\vspace{2.5cm}
    A\\
	\scshape\Large Simple introduction\\
    \normalfont\vspace{2mm}\normalsize for any early career researcher new to the discipline.\\
	\normalfont\vspace{5mm}\LARGE Monash Department of Materials Science Engineering \\\vspace{1.5cm}	
	%	\vspace{5mm}\Large Honours Thesis\\\vspace{1.5cm}	
	\endgroup
	\pagenumbering{arabic}
	\normalfont\normalsize

    \newpage
	\renewcommand{\baselinestretch}{0.94}\normalsize
	\tableofcontents
	\printglossaries
	\listoffigures
	\listoftables
	\renewcommand{\baselinestretch}{1}\normalsize

	%Introduces myself, my research, my motivations and is basically an opportunity to give my own individual context and story.
    \subfile{chapters/01-intro_.tex}


	% Generate bibliography.   
    \printbibliography[title=References]

\end{document}